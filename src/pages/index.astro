---
// client.ts
import { treaty } from '@elysiajs/eden'
import type { App } from './api/[...slugs]'
import Layout from '../layouts/Layout.astro'

const app = treaty<App>('localhost:4321')

// response type: 'Hi Elysia'
const { data, error } = await app.api.messages.index.get({
	headers: {
		'x-client-id': Math.random().toString(36).substring(7),
	}
})
---

<Layout title="Welcome to Astro.">
	<main class="container mx-auto">
		<h1>Welcome to Astro</h1>
		{error && <p>{error.value}</p>}
		{data &&
			<p>{data.message}</p>
		}

	</main>
</Layout>
